<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Der OÖ-Plan | Unsere Mitmach-Plattform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f2f5; }
        .spoe-red { background-color: #E30613; }
        .spoe-red-text { color: #E30613; }
        .btn-primary { background-color: #E30613; color: white; font-weight: 600; border-radius: 8px; padding: 10px 20px; transition: background-color 0.3s; }
        .btn-primary:hover { background-color: #c00511; }
        .card { background-color: white; border-radius: 8px; box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .feed-icon { width: 20px; height: 20px; }
        .nav-link.active { background-color: #fee2e2; color: #E30613; }
        .filter-btn.active { background-color: #E30613; color: white; border-color: #E30613; }
        .progress-bar { background-color: #e0e0e0; border-radius: 9999px; overflow: hidden; height: 1.5rem; }
        .progress { transition: width 0.5s ease-in-out; }
    </style>
</head>
<body class="text-gray-800">

    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, addDoc, doc, updateDoc, increment, query, orderBy, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAQ8p3QttWNnNpxGp2Y-IiDxHJr6uHuBRw",
            authDomain: "spoe-7de91.firebaseapp.com",
            projectId: "spoe-7de91",
            storageBucket: "spoe-7de91.appspot.com",
            messagingSenderId: "216443796994",
            appId: "1:216443796994:web:a8c46d9f024ceec44f311b"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- DOM Elements ---
        const feedContainer = document.getElementById('feed-container');
        const ideaForm = document.getElementById('idea-form');
        const ideaTextarea = document.getElementById('idea-textarea');
        const aiHelperBtn = document.getElementById('ai-helper-btn');
        const mainContentTitle = document.getElementById('main-content-title');
        const navLinks = document.querySelectorAll('.nav-link');
        const contentPages = document.querySelectorAll('.content-page');
        
        // --- Real-time Feed Listener (sorted by timestamp) ---
        const ideasCol = collection(db, 'ideas');
        const q = query(ideasCol, orderBy("timestamp", "desc"));
        onSnapshot(q, (snapshot) => {
            if (!feedContainer) return;
            feedContainer.innerHTML = ''; // Clear existing feed
            if (snapshot.empty) {
                feedContainer.innerHTML = '<div class="card p-4 text-center text-gray-500">Noch keine Ideen vorhanden. Sei der/die Erste!</div>';
            } else {
                snapshot.docs.forEach(doc => {
                    const idea = doc.data();
                    const ideaElement = createIdeaElement(doc.id, idea);
                    feedContainer.appendChild(ideaElement);
                });
            }
        });

        // --- Create Idea Element ---
        function createIdeaElement(id, idea) {
            const div = document.createElement('div');
            div.className = 'card p-4';
            const timestamp = idea.timestamp ? new Date(idea.timestamp.toDate()).toLocaleString('de-DE') : 'gerade eben';
            div.innerHTML = `
                <div class="flex items-center mb-3">
                    <img src="https://placehold.co/40x40/cccccc/000000?text=${idea.author.charAt(0)}" class="rounded-full mr-3">
                    <div>
                        <p class="font-bold">${idea.author}</p>
                        <p class="text-xs text-gray-500">${idea.location} - ${timestamp}</p>
                    </div>
                </div>
                <p class="mb-4 whitespace-pre-wrap">${idea.text}</p>
                <div class="flex justify-between items-center border-t pt-2">
                    <div class="flex space-x-4">
                        <button data-id="${id}" class="like-btn flex items-center space-x-1 text-gray-600 hover:spoe-red-text">
                            <i data-lucide="thumbs-up" class="feed-icon"></i>
                            <span>${idea.likes || 0}</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:spoe-red-text">
                            <i data-lucide="message-square" class="feed-icon"></i>
                            <span>${idea.comments || 0}</span>
                        </button>
                    </div>
                    <span class="text-xs font-semibold px-2 py-1 rounded-full ${idea.inProgress ? 'bg-yellow-200 text-yellow-800' : 'bg-green-200 text-green-800'}">
                        ${idea.inProgress ? 'In Prüfung' : 'Idee gesammelt'}
                    </span>
                </div>
            `;
            lucide.createIcons({ nodes: [div] });
            return div;
        }

        // --- Handle Likes ---
        document.addEventListener('click', async (e) => {
            const likeBtn = e.target.closest('.like-btn');
            if (likeBtn) {
                const id = likeBtn.dataset.id;
                const ideaRef = doc(db, 'ideas', id);
                await updateDoc(ideaRef, { likes: increment(1) });
            }
        });

        // --- Handle Idea Submission ---
        if (ideaForm) {
            ideaForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const text = ideaTextarea.value;
                if (text.trim() === '') return;

                await addDoc(ideasCol, {
                    author: "Andreas N.", // Placeholder for logged-in user
                    location: "Linz", // Placeholder
                    text: text,
                    likes: 0,
                    comments: 0,
                    inProgress: false,
                    timestamp: new Date()
                });

                ideaTextarea.value = '';
            });
        }
        
        // --- AI Helper (Mock) ---
        if (aiHelperBtn) {
            aiHelperBtn.addEventListener('click', () => {
                const currentText = ideaTextarea.value;
                const improvedText = `**Problem:** ${currentText}\n\n**Lösungsvorschlag:** Wir könnten [konkrete Maßnahme] umsetzen, um [Ziel] zu erreichen.\n\n**Referenz:** Ähnliche Projekte gab es bereits in [Gemeinde X] (siehe Spritzerstand 2023, Kosten: €350, Helfer: 5).`;
                ideaTextarea.value = improvedText;
                const modal = document.getElementById('ai-modal');
                modal.classList.remove('hidden');
                setTimeout(() => modal.classList.add('hidden'), 3000);
            });
        }

        // --- Navigation Logic ---
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');

                const targetPageId = link.dataset.target;
                mainContentTitle.textContent = link.querySelector('span').textContent;

                contentPages.forEach(page => {
                    if (page.id === targetPageId) {
                        page.classList.remove('hidden');
                    } else {
                        page.classList.add('hidden');
                    }
                });
            });
        });
        
        // --- Event Filter Logic ---
        const eventFilterContainer = document.getElementById('event-filter-container');
        if (eventFilterContainer) {
            eventFilterContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    eventFilterContainer.querySelector('.filter-btn.active').classList.remove('active');
                    e.target.classList.add('active');
                    const filterValue = e.target.dataset.filter;
                    document.querySelectorAll('.event-card').forEach(card => {
                        if (filterValue === 'alle' || card.dataset.gemeinde === filterValue) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    });
                }
            });
        }

        // --- Education Filter Logic ---
        const educationFilterContainer = document.getElementById('education-filter-container');
        if (educationFilterContainer) {
            educationFilterContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    educationFilterContainer.querySelector('.filter-btn.active').classList.remove('active');
                    e.target.classList.add('active');
                    const filterValue = e.target.dataset.filter;
                    document.querySelectorAll('.education-card').forEach(card => {
                        if (filterValue === 'alle' || card.dataset.category === filterValue) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    });
                }
            });
        }

        // --- Voting Logic ---
        const votingId = 'leistbares-wohnen';
        const votingRef = doc(db, "votings", votingId);
        const commentsCol = collection(db, "votings", votingId, "comments");
        
        const proBar = document.getElementById('pro-bar');
        const conBar = document.getElementById('con-bar');
        const proPercent = document.getElementById('pro-percent');
        const conPercent = document.getElementById('con-percent');
        const proVotesEl = document.getElementById('pro-votes');
        const conVotesEl = document.getElementById('con-votes');
        const commentsContainer = document.getElementById('comments-container');
        const commentForm = document.getElementById('comment-form');
        const commentTextarea = document.getElementById('comment-textarea');
        const aiCommentHelperBtn = document.getElementById('ai-comment-helper-btn');

        onSnapshot(votingRef, (doc) => {
            if (doc.exists() && proBar) {
                const data = doc.data();
                const proVotes = data.proVotes || 0;
                const conVotes = data.conVotes || 0;
                const totalVotes = proVotes + conVotes;

                const proPercentage = totalVotes > 0 ? (proVotes / totalVotes) * 100 : 0;
                const conPercentage = totalVotes > 0 ? (conVotes / totalVotes) * 100 : 0;

                proBar.style.width = `${proPercentage}%`;
                conBar.style.width = `${conPercentage}%`;
                proPercent.textContent = `${Math.round(proPercentage)}%`;
                conPercent.textContent = `${Math.round(conPercentage)}%`;
                proVotesEl.textContent = `${proVotes} Stimmen`;
                conVotesEl.textContent = `${conVotes} Stimmen`;
            }
        });

        const qComments = query(commentsCol, orderBy("timestamp", "desc"));
        onSnapshot(qComments, (snapshot) => {
            if (!commentsContainer) return;
            commentsContainer.innerHTML = '';
            snapshot.docs.forEach(doc => {
                const comment = doc.data();
                const commentEl = document.createElement('div');
                commentEl.className = 'flex items-start space-x-3 pt-4';
                const timestamp = comment.timestamp ? new Date(comment.timestamp.toDate()).toLocaleTimeString('de-DE', {hour: '2-digit', minute:'2-digit'}) : '';
                commentEl.innerHTML = `
                    <img src="https://placehold.co/32x32/cccccc/000000?text=${comment.author.charAt(0)}" class="rounded-full">
                    <div class="flex-1">
                        <div class="bg-gray-100 p-3 rounded-lg">
                            <p class="font-semibold text-sm">${comment.author}</p>
                            <p class="text-sm">${comment.text}</p>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">${timestamp}</p>
                    </div>
                `;
                commentsContainer.appendChild(commentEl);
            });
        });

        document.getElementById('vote-pro-btn')?.addEventListener('click', () => updateDoc(votingRef, { proVotes: increment(1) }));
        document.getElementById('vote-con-btn')?.addEventListener('click', () => updateDoc(votingRef, { conVotes: increment(1) }));

        commentForm?.addEventListener('submit', async (e) => {
            e.preventDefault();
            const text = commentTextarea.value;
            if (text.trim() === '') return;
            await addDoc(commentsCol, {
                author: "Eva M.", // Placeholder
                text: text,
                timestamp: new Date()
            });
            commentTextarea.value = '';
        });

        aiCommentHelperBtn?.addEventListener('click', () => {
            const currentText = commentTextarea.value;
            const improvedText = `Ich stimme zu, weil ${currentText}. Besonders wichtig finde ich dabei den Aspekt, dass [konkreter Punkt]. Ein gutes Beispiel dafür ist [Beispiel aus eigener Erfahrung oder Gemeinde].`;
            commentTextarea.value = improvedText;
        });


    </script>

    <!-- Main Layout -->
    <div class="min-h-screen flex">
        <!-- Left Sidebar (Navigation) -->
        <aside class="w-1/5 bg-white p-6 hidden md:block shadow-lg flex-shrink-0">
            <div class="flex items-center mb-8">
                <svg class="h-10 w-auto spoe-red-text" viewBox="0 0 100 100" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M50 0C22.4 0 0 22.4 0 50s22.4 50 50 50 50-22.4 50-50S77.6 0 50 0z"/><path d="M50 30c-11 0-20 9-20 20s9 20 20 20 20-9 20-20-9-20-20-20z"/></svg>
                <span class="ml-3 text-xl font-bold">Der OÖ-Plan</span>
            </div>
            <nav class="space-y-2">
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg active" data-target="page-home"><i data-lucide="home" class="mr-3"></i><span>Home / Feed</span></a>
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg hover:bg-gray-100" data-target="page-abstimmungen"><i data-lucide="bar-chart-2" class="mr-3"></i><span>Abstimmungen</span></a>
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg hover:bg-gray-100" data-target="page-veranstaltungen"><i data-lucide="calendar" class="mr-3"></i><span>Veranstaltungen</span></a>
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg hover:bg-gray-100" data-target="page-gruppen"><i data-lucide="users" class="mr-3"></i><span>Gruppen</span></a>
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg hover:bg-gray-100" data-target="page-bildung"><i data-lucide="book-open" class="mr-3"></i><span>Bildungsangebote</span></a>
                <a href="#" class="nav-link flex items-center p-2 text-lg font-semibold rounded-lg hover:bg-gray-100" data-target="page-toolbox"><i data-lucide="wrench" class="mr-3"></i><span>Toolbox</span></a>
            </nav>
            <div class="mt-10 p-4 bg-red-50 rounded-lg">
                <h3 class="font-bold spoe-red-text">KI-Workshops für Mandatare</h3>
                <p class="text-sm mt-2">Lerne, wie du KI für deine politische Arbeit nutzen kannst. Nächster Termin: 15.09.</p>
                <a href="#" class="text-sm font-semibold spoe-red-text mt-2 block">Jetzt anmelden &rarr;</a>
            </div>
        </aside>

        <!-- Center (Main Feed) -->
        <main class="w-full md:w-3/5 p-4 md:p-8 overflow-y-auto">
            <h2 id="main-content-title" class="text-2xl font-bold mb-4">Home / Feed</h2>
            
            <!-- Page: Home -->
            <div id="page-home" class="content-page">
                <div class="card p-4 mb-6">
                    <form id="idea-form">
                        <textarea id="idea-textarea" class="w-full p-2 border rounded-lg" rows="4" placeholder="Gestalte OÖ mit! Was ist deine Idee, dein Wunsch oder dein Anliegen..."></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <button type="button" id="ai-helper-btn" class="flex items-center text-sm text-gray-600 hover:spoe-red-text">
                                <i data-lucide="sparkles" class="mr-1 w-4 h-4"></i> Mit KI-Assistent verbessern
                            </button>
                            <button type="submit" class="btn-primary">Veröffentlichen</button>
                        </div>
                    </form>
                </div>
                <div class="flex space-x-2 mb-4">
                    <button class="px-4 py-1 text-sm font-semibold rounded-full active-filter">Alles</button>
                    <button class="px-4 py-1 text-sm font-semibold rounded-full bg-white hover:bg-gray-200">Meine Gemeinde</button>
                    <button class="px-4 py-1 text-sm font-semibold rounded-full bg-white hover:bg-gray-200">Mein Bezirk</button>
                </div>
                <div id="feed-container" class="space-y-4">
                    <div class="card p-4 text-center text-gray-500">Lade Ideen...</div>
                </div>
            </div>

            <!-- Other Pages (initially hidden) -->
            <div id="page-abstimmungen" class="content-page hidden">
                <div class="card p-6">
                    <span class="text-sm font-bold spoe-red-text">TOP-THEMA DES MONATS</span>
                    <h3 class="text-2xl font-bold my-2">#LeistbaresWohnen</h3>
                    <p class="text-gray-700 mb-6">Die Community hat diese Idee zur wichtigsten des Monats gewählt. Jetzt geht es um die konkrete Ausgestaltung. Stimmst du dem folgenden Vorschlag zu?</p>
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg mb-6">
                        <p class="font-semibold">"Sollen wir eine Landes-Wohnbauoffensive starten, um 5.000 neue, leistbare Gemeindewohnungen in den nächsten 5 Jahren zu schaffen?"</p>
                    </div>

                    <!-- Voting Results -->
                    <div class="mb-4">
                        <div class="flex justify-between mb-1">
                            <span class="text-lg font-bold text-green-600">Zustimmung</span>
                            <span id="pro-votes" class="text-sm text-gray-600">0 Stimmen</span>
                        </div>
                        <div class="progress-bar flex">
                            <div id="pro-bar" class="progress bg-green-500 flex items-center justify-center text-white font-bold" style="width: 0%;">
                                <span id="pro-percent">0%</span>
                            </div>
                        </div>
                    </div>
                    <div class="mb-6">
                        <div class="flex justify-between mb-1">
                            <span class="text-lg font-bold spoe-red-text">Ablehnung</span>
                            <span id="con-votes" class="text-sm text-gray-600">0 Stimmen</span>
                        </div>
                        <div class="progress-bar flex">
                             <div id="con-bar" class="progress spoe-red flex items-center justify-center text-white font-bold" style="width: 0%;">
                                <span id="con-percent">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Voting Actions -->
                    <div class="flex space-x-4 mb-8">
                        <button id="vote-pro-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg flex items-center justify-center space-x-2 transition-transform transform hover:scale-105">
                            <i data-lucide="thumbs-up"></i>
                            <span>Zustimmen</span>
                        </button>
                        <button id="vote-con-btn" class="w-full spoe-red hover:bg-red-700 text-white font-bold py-3 rounded-lg flex items-center justify-center space-x-2 transition-transform transform hover:scale-105">
                            <i data-lucide="thumbs-down"></i>
                            <span>Ablehnen</span>
                        </button>
                    </div>

                    <!-- Comments Section -->
                    <div class="border-t pt-6">
                        <h4 class="text-xl font-bold mb-4">Diskussion</h4>
                        <form id="comment-form" class="mb-4">
                            <textarea id="comment-textarea" class="w-full p-2 border rounded-lg" rows="3" placeholder="Dein Kommentar, deine Anregung..."></textarea>
                            <div class="flex justify-between items-center mt-2">
                                <button type="button" id="ai-comment-helper-btn" class="flex items-center text-sm text-gray-600 hover:spoe-red-text">
                                    <i data-lucide="sparkles" class="mr-1 w-4 h-4"></i> Mit KI-Assistent formulieren
                                </button>
                                <button type="submit" class="btn-primary px-4 py-2 text-sm">Kommentieren</button>
                            </div>
                        </form>
                        <div id="comments-container" class="space-y-4 divide-y">
                            <!-- Comments loaded here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="page-veranstaltungen" class="content-page hidden">
                <div id="event-filter-container" class="flex flex-wrap gap-2 mb-6">
                    <button class="filter-btn active px-4 py-2 text-sm font-semibold rounded-full border" data-filter="alle">Alle</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="linz">Linz</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="steyr">Steyr</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="rohrbach">Rohrbach</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="voecklabruck">Vöcklabruck</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="gmunden">Gmunden</button>
                </div>
                <div class="space-y-4">
                    <!-- Events will be here -->
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="linz">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">05</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Podiumsdiskussion: Zukunft des Wohnens in Linz</h3><p class="text-sm text-gray-600">19:00 Uhr | Volkshaus Pichling | Mit Experten und Martin Winkler.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="steyr">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">08</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Workshop: Arbeitswelt im Wandel</h3><p class="text-sm text-gray-600">18:00 Uhr | AK Steyr | Wie sichern wir gute Arbeit in der Region?</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="rohrbach">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">12</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Stammtisch: Was braucht das Mühlviertel?</h3><p class="text-sm text-gray-600">19:30 Uhr | Gasthaus Dorfner, Rohrbach | Offene Runde für alle.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="voecklabruck">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">15</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Wanderung mit Martin Winkler</h3><p class="text-sm text-gray-600">14:00 Uhr | Treffpunkt Parkplatz Taferlklause | Gemütliche Runde mit Gesprächen.</p></div>
                    </div>
                     <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="linz">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">20</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Rotes Fest im Volkshaus Keferfeld</h3><p class="text-sm text-gray-600">ab 15:00 Uhr | Mit Kinderprogramm, Live-Musik und Kulinarik.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="gmunden">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">22</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Ideenwerkstatt: Zukunft des Salzkammerguts</h3><p class="text-sm text-gray-600">18:30 Uhr | Seehotel Schwan | Brainstorming für unsere Region.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="steyr">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">28</p><p class="font-semibold">SEP</p></div>
                        <div><h3 class="font-bold text-lg">Familien-Spieletag im Schlosspark</h3><p class="text-sm text-gray-600">14:00 - 17:00 Uhr | Spiel und Spaß für die ganze Familie.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="rohrbach">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">04</p><p class="font-semibold">OKT</p></div>
                        <div><h3 class="font-bold text-lg">Infostand am Wochenmarkt</h3><p class="text-sm text-gray-600">08:00 - 12:00 Uhr | Stadtplatz Rohrbach | Komm auf einen Kaffee vorbei!</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="voecklabruck">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">09</p><p class="font-semibold">OKT</p></div>
                        <div><h3 class="font-bold text-lg">Diskussion: Bessere Pflege für unsere Region</h3><p class="text-sm text-gray-600">19:00 Uhr | Stadtsaal Vöcklabruck | Mit Pflegeexpert:innen.</p></div>
                    </div>
                    <div class="event-card card p-4 flex items-start gap-4" data-gemeinde="gmunden">
                        <div class="text-center w-16 flex-shrink-0"><p class="text-2xl font-bold spoe-red-text">15</p><p class="font-semibold">OKT</p></div>
                        <div><h3 class="font-bold text-lg">Planungstreffen: Rote Punschhütte</h3><p class="text-sm text-gray-600">19:00 Uhr | Cafe Brandl | Wir planen unseren Stand am Adventmarkt.</p></div>
                    </div>
                </div>
            </div>

            <div id="page-gruppen" class="content-page hidden"><div class="card p-8 text-center"><h3 class="text-xl font-bold">Gruppen</h3><p class="mt-2 text-gray-600">Schließe dich mit Gleichgesinnten zusammen, um Projekte zu planen und umzusetzen.</p></div></div>
            
            <div id="page-bildung" class="content-page hidden">
                <div id="education-filter-container" class="flex flex-wrap gap-2 mb-6">
                    <button class="filter-btn active px-4 py-2 text-sm font-semibold rounded-full border" data-filter="alle">Alle</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="top">Top-Angebote</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="kommunal">Kommunales</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="digital">KI & Digitales</button>
                    <button class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border bg-white" data-filter="grundlagen">Grundlagen</button>
                </div>
                
                <h3 class="text-xl font-bold mb-4">Unsere Top-Angebote</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="education-card card p-6 flex flex-col" data-category="top">
                        <i data-lucide="phone-call" class="w-10 h-10 spoe-red-text mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Rufseminare: Bildung nach Maß</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Ihre Sektion braucht Input zu einem bestimmten Thema? Buchen Sie hier maßgeschneiderte Workshops direkt für Ihre Ortsgruppe.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Jetzt anfragen &rarr;</a>
                    </div>
                    <div class="education-card card p-6 flex flex-col" data-category="top">
                        <i data-lucide="file-text" class="w-10 h-10 spoe-red-text mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Update: Das neue ElWog</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Das OÖ Elektrizitätswirtschaftsgesetz einfach erklärt. Ein Muss für alle Bürgermeister:innen und Gemeinderät:innen.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Zum Erklärvideo &rarr;</a>
                    </div>
                    <div class="education-card card p-6 flex flex-col" data-category="top">
                        <i data-lucide="sparkles" class="w-10 h-10 spoe-red-text mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">KI in der politischen Arbeit</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Lernen Sie, wie künstliche Intelligenz die politische Arbeit revolutioniert – von der Analyse bis zur Kommunikation.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Details & Termine &rarr;</a>
                    </div>
                    <div class="education-card card p-6 flex flex-col" data-category="top">
                        <i data-lucide="mouse-pointer-click" class="w-10 h-10 spoe-red-text mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Training: Der OÖ-Plan</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Werden Sie zum Profi auf unserer neuen Mitmach-Plattform. Lernen Sie alle Funktionen kennen und nutzen Sie das volle Potenzial.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Zu den Anleitungen &rarr;</a>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-4">Weitere Angebote</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                     <div class="education-card card p-6 flex flex-col" data-category="kommunal">
                        <h3 class="text-lg font-bold mb-2">Gemeindefinanzen für Einsteiger:innen</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Wie liest man ein Gemeindebudget? Wo sind die Gestaltungsspielräume? Kompakter Überblick für die Fraktionsarbeit.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Mehr erfahren &rarr;</a>
                    </div>
                     <div class="education-card card p-6 flex flex-col" data-category="grundlagen">
                        <h3 class="text-lg font-bold mb-2">Grundlagen der Sozialdemokratie</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Unsere Werte, unsere Geschichte, unsere Zukunft. Das ideale Seminar für neue Mitglieder und Interessierte.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Mehr erfahren &rarr;</a>
                    </div>
                     <div class="education-card card p-6 flex flex-col" data-category="digital">
                        <h3 class="text-lg font-bold mb-2">Social Media für die Ortsgruppe</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Wie erreichen wir die Menschen online? Tipps und Tricks für einen gelungenen Auftritt auf Facebook, Instagram & Co.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Mehr erfahren &rarr;</a>
                    </div>
                     <div class="education-card card p-6 flex flex-col" data-category="kommunal">
                        <h3 class="text-lg font-bold mb-2">Bauordnung und Raumplanung</h3>
                        <p class="text-gray-600 mb-4 flex-grow">Einblick in die wichtigsten Instrumente der Gemeindeentwicklung. Für alle, die im Bauausschuss mitreden wollen.</p>
                        <a href="#" class="font-semibold spoe-red-text self-start">Mehr erfahren &rarr;</a>
                    </div>
                </div>
            </div>

            <div id="page-toolbox" class="content-page hidden"><div class="card p-8 text-center"><h3 class="text-xl font-bold">Toolbox</h3><p class="mt-2 text-gray-600">Anleitungen, Checklisten und Vorlagen für deine politische Arbeit vor Ort. Vom Spritzerstand bis zur Gemeindezeitung.</p></div></div>

        </main>

        <!-- Right Sidebar (Martin Winkler & Top-Themen) -->
        <aside class="w-1/5 bg-transparent p-6 hidden md:block flex-shrink-0">
            <div class="card p-4 mb-6 text-center">
                <img src="https://placehold.co/80x80/E30613/FFFFFF?text=MW" alt="Martin Winkler" class="rounded-full mx-auto mb-3">
                <h3 class="font-bold">Martin Winkler</h3>
                <p class="text-sm text-gray-600 mb-3">Unser Mann für OÖ</p>
                <p class="text-sm">"Wir übernehmen den Landtag nicht als Vision, sondern als Ziel. Diese Plattform ist unser Plan. Wir setzen um, wir reden nicht nur."</p>
            </div>
            <div class="card p-4">
                <h3 class="font-bold mb-3">Top-Thema des Monats</h3>
                <div class="space-y-3">
                    <div class="bg-red-50 p-3 rounded-lg">
                        <p class="text-sm font-bold">#LeistbaresWohnen</p>
                        <p class="text-xs mt-1">Die Community hat gevotet! Diesen Monat bündeln wir alle Kräfte für faire Mieten und mehr Gemeindewohnungen.</p>
                        <a href="#" class="text-xs font-semibold spoe-red-text mt-1 block">Mitmachen &rarr;</a>
                    </div>
                </div>
            </div>
             <div class="card p-4 mt-6">
                <h3 class="font-bold mb-3">KI-Analyse: Polit-Check</h3>
                <p class="text-sm">Unsere KI hat die letzte Rede des politischen Mitbewerbers analysiert. Hier sind die Fakten und unsere Antwortvorschläge.</p>
                <a href="#" class="text-sm font-semibold spoe-red-text mt-2 block">Zur Analyse &rarr;</a>
            </div>
        </aside>
    </div>

    <!-- AI Helper Modal -->
    <div id="ai-modal" class="hidden fixed top-5 right-5 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50">
        <p>KI-Assistent hat deinen Beitrag optimiert!</p>
    </div>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>
